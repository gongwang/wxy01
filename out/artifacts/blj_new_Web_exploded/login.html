<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>用户登录</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="./bower_components/bootstrap/dist/css/bootstrap.min.css">
<style>
/*	.form-control-feedback{
			margin-right: 90%;
			color: #c7c4c4;//
			background-color: #d3d1d1;!**!
		} */
a {
	text-decoration: none;
	font-size: 14px;
}

a, a:link {
	color: #000;
	text-decoration: none;
}

.modal-dynamic {
	width: 300px;
	height: 300px;
}
/* .form-control-feedback {
			color: #c7c4c4;
			margin-right: 81%;
			background: #efeded8c;
			width: 42px;
			height: 41px;
			border-right: 1px solid #d7cece63;
			margin-top: 2px;
			padding-top: 3px;
		} */
.bottom {
	border-bottom: solid 2.5px #1F60B5;
}

.login_close {
	background-color: #1F60B5 !important;
	color: white !important;
	font-size: 12px !important;
	outline: none !important;
	height: 30px;
}

.btn-block {
	width: 290px;
	height: 43px;
	text-align: center;
	margin: 0 auto;
	margin-top: 50px;
	margin-left: 18px;
	position: relative;
	background-color: #00559d;
	border-radius: 3px;
	border: none;
	font-size: 16px;
	color: #FFFFFF;
}

.btn-block:focus {
	background-color: #00559d !important;
	color: #FFFFFF;
}

.btn-block:hover {
	background-color: #00559d !important;
	color: #FFFFFF;
}

.btn-block:active {
	background-color: #00559d !important;
	color: #FFFFFF !important;
}

#sendsmsbtn {
	/* margin-left: 18px;margin-top:5px;width: 110px;height: 41px;
			text-align: center; border-radius:0px;border: none;
			background-color: #00559d;color: #FFFFFF; */
	margin-left: 17px;
	padding: 10px;
	border-radius: 0px;
	border: none;
	width: 110px;
	background-color: #00559d;
	color: #FFFFFF;
}

.login-install {
	height: 86px;
	margin-left: -46px;
	text-align: center;
	background-size: contain;
	background: url("./images/login-install.png") no-repeat center center;
	cursor: pointer;
}

.login-input {
	height: 110px;
	text-align: center;
	background-size: contain!important;
	background: url("./images/login-input.png") no-repeat 135px;
}
/*.login-success{
            height: 130px;
            text-align: center;
            background: url("./images/login-success.png") no-repeat center center;
        }*/
#login_type {
	appearance: none;
	-moz-appearance: none;
	-webkit-appearance: none;
	width: 96px;
	height: 41px;
	border: 1px solid #929a9a52;
	color: black;
	border-left: none;
	margin-left: -4px;
	padding-left: 5px;
	background: #adabab0d url(./images/loginToggle.png) no-repeat 75px;
	background-size: 10px;
	outline: none
}

/* #login_type:focus {
	border: 1px solid #929a9a52 !important;
	border-left: none;
	outline: none
}

#login_type:active {
	border: 1px solid #929a9a52 !important;
	border-left: none;
	outline: none
} */

/* #login_type>option[value]{
	background-color: #adabab0d;
}
 */
 .option_method:after{
 
 }
.logo_input {
	margin-left: 18px;
	background-color: #adabab0d;
	padding: 10px;
	padding-top: 7px;
	width: 42px;
	height: 41px;
	display: block;
	border: 1px solid #929a9a52;
	margin-right: -4px;
	border-right: none;
	margin-bottom: -41px;
}

#_smspassword {
	width: 163px;
	height: 41px;
	color: black;
	border: 1px solid #929a9a52;
	border-radius: 0px;
	display: inline;
	background-color: #adabab0d;
	margin-left: 18px;
}
</style>
</head>
<body class="login_body"
	style="background: url(./images/loginBackground2.png) no-repeat fixed; background-size: cover; -webkit-background-size: cover; -o-background-size: cover; position: relative;">
	<div class="box-body"
		style="background-color: white;border-radius:10px;padding-left:46px; margin-left: 58%; width: 420px; height: 380px; margin-top: 15%;">
		<span
			style="font-size: 20px; color: #00559d; margin-left: 115px; font-weight: 900; display: inline-block; letter-spacing: 3px; margin-top: 40px;">用户登录</span>
		<form class="bs-example bs-example-form" id="doAmsForm" role="form" th:action="@{/checkLogin}" method="post">
			<div style="margin-top: 20px;">
			<span class="logo_input"> <img src="./images/loginUser.png"
				style="width: 22px; height: 23px;"></span>
			<input type="text" class="form-control" id="username" autocomplete="off" placeholder="请在此输入账号名称"
				  style="width: 152px; padding-right: 0px;vertical-align: bottom;height: 41px; border: 1px solid #929a9a52; border-radius: 0px; display: inline; background-color: #adabab0d; color: black; margin-left: 60px;" name="username">
			<select class="toggle" id="login_type" name="login_type">
				<option value="0">静态密码</option>
                <option value="1">动态口令</option>
                <option value="4">短信认证</option>
                <option value="3">指纹认证</option>
                <option value="2">密码+指纹</option>
			</select>
		</div>

			<div id="password_login" style="margin-top: 25px;">
				<span class="logo_input"> <img src="./images/loginPassword.png" style="width: 22px; height: 23px;"></span>
				<input type="password" name="password" class="form-control" id="password"
					placeholder="请在此输入账号密码"  autocomplete="off"  style="width: 248px; height: 41px; border: 1px solid #929a9a52; border-radius: 0px; display: inline; background-color: #adabab0d; color: black; margin-left: 60px;">
				<p th:text="${msg}" class="login_sign"
					style="color: red; margin-left: 20px; position: absolute; margin-top: 10px;"></p>
				<div>
					<button type="submit" class=" btn btn-default  btn-block"
						id="login">登录</button>
				</div>
				<input type="hidden" name="logintoken" th:value="${logintoken}" />
			</div>


			<div id="message_login" style="display: none; margin-top: 20px;">
				
				<input type="text" id="_smspassword" class="form-control"
					placeholder="请输入验证码" autocomplete="off" name="smscode"><input type="button"
					id="sendsmsbtn" value="获取验证码">
				<p id="smsmsg" class="login_sign" th:text="${msg}"
					style="color: red; margin-left: 20px; position: absolute; margin-top: 10px;"></p>
				<div>
					<button type="submit" class=" btn btn-default  btn-block"
						id="_login">登录</button>
				</div>
				<input type="hidden" name="logintoken" th:value="${logintoken}" />
			</div>

			<div id="token_login" style="display: none; margin-top: 20px;">
				<span class="logo_input"> <img
					src="./images/loginPassword.png" style="width: 22px; height: 23px;"></span>
				<input type="password"  class="form-control" id="dpassword" name="dpassword"
					placeholder="请在此输入账号密码" autocomplete="off"
					style="width: 248px; height: 41px; border: 1px solid #929a9a52; border-radius: 0px; display: inline; background-color: #adabab0d; color: black; margin-left: 60px;">
				<div style="margin-top: 20px;">
					<span class="logo_input"> <img src="./images/loginLock.png"
						style="width: 22px; height: 23px;"></span> 
					<input type="text"
						class="form-control" id="dynamiccode" placeholder="请在此输入动态口令" autocomplete="off"
						style="width: 248px; height: 41px; border: 1px solid #929a9a52; border-radius: 0px; display: inline; background-color: #adabab0d; color: black; margin-left: 60px;"
						name="dynamiccode">
				</div>
				<p th:text="${msg}" class="login_sign"
					style="color: red; margin-left: 20px; position: absolute; margin-top: 10px;"></p>
				<div>
					<button type="submit" class=" btn btn-default  btn-block"
						style="margin-top: 35px;" id="_login2">登录</button>
				</div>
				<input type="hidden" name="logintoken" th:value="${logintoken}" />
			    </div>
			<div id="finger_login" style="display: none; margin-top: 20px; height: 110px;">
				<div style="margin-bottom: 10px;" id="finger_div">
				<span class="logo_input"> <img
						src="./images/loginPassword.png" style="width: 22px; height: 23px;"></span>
					<input type="password"  name="fingerpassword" class="form-control" id="fingerpassword"
						   placeholder="请在此输入账号密码"  autocomplete="off"
						   style="width: 248px; height: 41px; border: 1px solid #929a9a52; border-radius: 0px; display: inline; background-color: #adabab0d; color: black; margin-left: 60px;">				
					<input type="hidden" id="fpdata" name="fpdata" />
				</div>
				<div class="bder" id="fingerDiv" style="text-align: center;">
					<a href="#" onclick="return downDriver();" id="downloadurl"><div class="login-install"></div></a>
				</div>
				<p th:text="${msg}" class="login_sign"
					style="color: red; margin-left: 20px; position: absolute; margin-top: 10px;"></p>
				<div>
					<button type="submit" class="btn btn-default btn-block"
						id="_login3" style="margin-top: 20px;">登录</button>
				</div>
				<input type="hidden" name="logintoken" th:value="${logintoken}" />
			</div>
		</form>
	</div>

	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dynamic">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">×</button>
					<span class="modal-title">扫码获得动态口令</span>
				</div>
				<div class="modal-body">
					<img id="dynamic_image" src="" alt="" style="width: 100%;">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn newaddbtn login_close"
						data-dismiss="modal">关闭</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<div class="modal modal-info" id="modal-success">
		<div class="modal-dialog">
			<div class="modal-content"
				style="width: 220px; height: 90px; margin-left: 200px; border-radius: 4px; margin-top: 140px;">
				<div>
					<img th:src="@{/images/success.png}"
						style="width: 40px; height: 40px; margin: 25px 0px 40px 45px;">
				</div>
				<div class="modal-body"
					style="font-family: NotoSansHans-Regular; float: left; font-size: 16px; color: rgba(0, 0, 0, 0.65) !important; padding: 0px; background-color: white !important; margin-left: 100px; margin-top: -72px; height: 10px;">
					<p style="color: black">操作成功!</p>
				</div>
			</div>
		</div>
	</div>
	<div class="modal modal-danger" id="modal-danger">
		<div class="modal-dialog">
			<div class="modal-content"
				style="width: 220px; height: 90px; margin-left: 200px; border-radius: 4px; margin-top: 140px;">
				<div>
					<img th:src="@{/images/fail.png}"
						style="width: 40px; height: 40px; margin: 25px 0px 40px 35px;">
				</div>
				<div class="modal-body"
					style="font-family: NotoSansHans-Regular; float: left; font-size: 16px; color: rgba(0, 0, 0, 0.65) !important; padding: 0px; background-color: white !important; margin-left: 95px; margin-top: -72px; height: 10px;">
					<p style="color: black">操作失败!</p>
				</div>
			</div>
		</div>
	</div>
	<!-- jQuery 3 -->
	<script src="./bower_components/jquery/dist/jquery.min.js"></script>
	<script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="./js/common/modal.js"></script>
	<script th:inline="javascript">
var dynamiclogin = [[${dynamic}]];
var downloadurl = 'download/windows';
function _version(){
  var isWin = (navigator.platform == "Win32") || (navigator.platform == "Windows");
  var isLinux = (String(navigator.platform).indexOf("Linux") > -1);
  downloadurl = isWin ? 'download/windows' : 'download/linux';
   $.ajax({  
      type: "GET",  
      url: downloadurl+"/WebPlugin.version",  
      data: {},  
      dataType: "json",
      success: function(data){  
          data = data+"";
          data = data.replace(/\ +/g, ""); //去掉空格
          data = data.replace(/[ ]/g, "");    //去掉空格
          data = data.replace(/[\r\n]/g, ""); //去掉回车换行
          data = data.replace(/[\n]/g, ""); //去掉换行
          data = data.replace(/[\r]/g, ""); //去掉回车
          jasjWebFinger("version",0,0,data);
      }
  }); 
} 
   
function downDriver(){

  if(_download){
    window.location.href=downloadurl+'/WebPlugin.exe';
  }
  return false;
}

</script>
	<script src="./js/fingerws.js"></script>
	<script src="./js/layer/layer.js"></script>
	<script src="./js/view_js/login.js"></script>
</body>
</html>